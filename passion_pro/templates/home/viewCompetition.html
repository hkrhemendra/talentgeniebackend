{% extends "layouts/base.html" %}

{% block title %} View Competition {% endblock %} 
<!-- Specific CSS goes HERE -->
{% block stylesheets %}
<!-- <link rel="stylesheet" href="/static/assets/plugins/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/assets/plugins/bootstrap/css/bootstrap.css"> -->
{% endblock stylesheets %}

{% block content %}

<!-- <div class="row"> -->
<!-- <div class="col-md-9 mb-5"> -->
<div class="col-md-12 mb-5">
<form method="POST" class="needs-validation" enctype="multipart/form-data" role="form" action="" novalidate>
        {{ form.hidden_tag() }}
        <!-- main row start -->
        <div class="row">  
    
        <!-- basic detais about compt -->
        <div class="col">
                    
            <legend class="mb-7">{{compt.title}} Update</legend>
            <br/>
        <!--this for loop will show error or success messages-->
        {%for message in get_flashed_messages() %}
        {%if message == "success"%}
          <div class="alert alert-success alert-dismissible fade show" role="alert">
           <strong>Congratulation!</strong> compt Updated Successfully
         </div>
        {%else%}
          <div class="alert alert-danger" role="alert">
            {{message}}
          </div>
        {%endif%}
      {%endfor%}
      <!--.................................................-->
      
            <div class="form-group">
                <div class="col">{{ form.title.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                    {% if form.title.errors %}
                    {{ form.title( class="form-control is-invalid",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;",value=compt.title ) }}
                        <div class="invalid-feedback">
                            {% for error in form.title.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="valid-feedback">Looks good!</div>           
                        {{ form.title(class="form-control",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;",value=compt.title) }}   
                    {% endif %}
                </div>
            </div>
            
            <div class="form-group">
                <div class="col">{{ form.competition_start_time.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                    {% if form.competition_start_time.errors %}
                    {{ form.competition_start_time( class="form-control is-invalid",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;" ) }}
                        <div class="invalid-feedback">
                            {% for error in form.competition_start_time.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="valid-feedback">Looks good!</div>           
                        {{ form.competition_start_time(class="form-control",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}   
                    {% endif %}
                </div>
            </div>
            <div class="form-group">
                <div class="col">{{ form.competition_end_time.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                    {% if form.competition_end_time.errors %}
                    {{ form.competition_end_time( class="form-control is-invalid",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;" ) }}
                        <div class="invalid-feedback">
                            {% for error in form.competition_end_time.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="valid-feedback">Looks good!</div>           
                        {{ form.competition_end_time(class="form-control",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}   
                    {% endif %}
                </div>
            </div>
           
  
            <div class="form-group">
                <div class="col">{{ form.registration_start.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                    {% if form.registration_start.errors %}
                    {{ form.registration_start( class="form-control is-invalid",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;" ) }}
                        <div class="invalid-feedback">
                            {% for error in form.registration_start.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="valid-feedback">Looks good!</div>           
                        {{ form.registration_start(class="form-control",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}   
                    {% endif %}
                </div>
            </div>
            <div class="form-group">
                <div class="col">{{ form.registration_end.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                    {% if form.registration_end.errors %}
                    {{ form.registration_end( class="form-control is-invalid",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                        <div class="invalid-feedback">
                            {% for error in form.registration_end.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="valid-feedback">Looks good!</div>           
                        {{ form.registration_end(class="form-control",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}   
                    {% endif %}
                </div>
            </div>
            <div class="form-group">
                <div class="col">{{ form.category_fk.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                {% if form.category_fk.errors %}
                    {{ form.category_fk(class="form-control ",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                    <div class="invalid-feedback">
                        {% for error in form.category_fk.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                  {% else %}
                    {{ form.category_fk(class="form-control ",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                    <div class="valid-feedback">
                        Looks good!
                     </div>
                {% endif %}
            </div>

        </div>
        <div class="form-group ">
            <div class="col"> {{ form.minage.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
            <div class="col-sm-12">
            {% if form.minage.errors %}
                {{ form.minage(class="form-control  is-invalid",value=compt.minage,style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                <div class="invalid-feedback">
                    {% for error in form.minage.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% else %}
                {{ form.minage(class="form-control ",value=compt.minage,style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
            {% endif %}
        </div>
        </div>
        <div class="form-group ">
                <div class="col">{{ form.maxage.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                {% if form.maxage.errors %}
                    {{ form.maxage(class="form-control  is-invalid",value=compt.maxage,style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                    <div class="invalid-feedback">
                        {% for error in form.maxage.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.maxage(class="form-control ",value=compt.maxage,style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                {% endif %}
            </div>
        </div>
        <div class="form-group">
            <div class="col">{{ form.gender.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
            <div class="col-sm-12">
            {% if form.gender.errors %}
                {{ form.gender(class="form-control ",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                <div class="invalid-feedback">
                    {% for error in form.gender.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
              {% else %}
                {{ form.gender(class="form-control ",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                <div class="valid-feedback">
                    Looks good!
                 </div>
            {% endif %}
        </div>
        
        </div>
        <div class="form-group ">
            <div class="col">{{ form.remark.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
            <div class="col-sm-12">
            {% if form.remark.errors %}
                {{ form.remark(class="form-control  is-invalid",value=compt.remark,style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                <div class="invalid-feedback">
                    {% for error in form.remark.errors %}
                        <span>{{ error }}</span>
                    {% endfor %}
                </div>
            {% else %}
                {{ form.remark(class="form-control ",value=compt.remark,style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
            {% endif %}
        </div>
        </div>


        <div class="form-group">
                <div class="col">{{ form.discription.label(class="form-control-label",style="color:rgba(138, 135, 135, 0.774)") }}</div>
                <div class="col-sm-12">
                {% if form.discription.errors %}
                    {{ form.discription(class="form-control  is-invalid",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                    <div class="invalid-feedback">
                        {% for error in form.discription.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ form.discription(class="form-control ",style="font-size:larger;background: transparent;border-top:0px;border-left: 0px;border-right: 0px;") }}
                {% endif %}
            </div>
        </div>


        <div class="form-group">
            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                update compt
              </button>
        </div>
        
          <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Update competition</h5>
              
            </div>
            <div class="modal-body">
              <span style="color: currentColor;">are you sure you want to update?</span>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" name="submit" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- basic details end -->
    <!-- files details -->
    <!-- column two -->
    <div class="col">
    
        <div class="col">
        <div class="card" style="width: 25rem;">
            <img id="imageid" src="{{COMPT_VIEW_FOLDER}}{{compt.code}}/{{compt.image}}" height="250px" class="card-img-top" alt="...">
            <div class="card-body">
            {% if form.image.errors %}
                    {{ form.image(id='image',onchange="showPreviewOne(event)",class="form-control  is-invalid file_size",hidden='hidden',accept='image/*') }}
                    <div class="invalid-feedback">
                        {% for error in form.image.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
            {% else %}
                    {{ form.image(id='image',onchange="showPreviewOne(event)",class="form-control  file_size",hidden='hidden',accept='image/*') }}
            {% endif %}
            {{ form.image.label(class="form-control-label btn btn-primary",value='Change',for="image") }}
            <button class="btn btn-primary" name="submit" type="submit">Save Change</button> 
    
            </div>
          </div>  
          </div>    
    </div>
    <!-- column three -->
    
     

<!-- main row -->
</div>
 </form>
</div>


{% endblock content %}

<!-- Specific Page JS goes HERE  -->

{% block javascripts %}
<script>

    function showPreviewOne(event){
      if(event.target.files.length > 0){
        let src = URL.createObjectURL(event.target.files[0]);
        let fid=event.target.id+'id'
        let preview = document.getElementById(fid);
        preview.src = src;
        preview.style.display = "block";
      } 
    }
   

// size limit for images,video and broucher
    $(document).ready(function(){
   maxfilesize=10*1024*1024;
   $(".file_size").change(function(){
      filesize = this.files[0].size;

      if (filesize > maxfilesize){
         this.setCustomValidity("you can only upload file under 10 MB");
          this.reportValidity();
          this.value=""
      }
      else{
              this.setCustomValidity("");
      }
   })
}
)

  </script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
{% endblock javascripts %}